{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createVNode as _createVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-0120df0d\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"margin-top\": \"10px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"form-row\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", null, \"考试中心\")], -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"form-group\",\n  style: {\n    \"margin-left\": \"47%\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"space-between\"\n  }\n};\nconst _hoisted_7 = {\n  class: \"pagination\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_button_group = _resolveComponent(\"el-button-group\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_button_group, {\n    class: \"ml-4\"\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.buttons2, (button, index) => {\n      return _openBlock(), _createBlock(_component_el_button, {\n        key: index,\n        type: button.isActive ? 'success' : 'default',\n        onClick: $event => $options.handleButtonClick(button.method, index)\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(button.label), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\", \"onClick\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  })])]), _createVNode(_component_el_table, {\n    data: $options.tableData,\n    style: {\n      \"width\": \"100%\",\n      \"margin-left\": \"3%\"\n    }\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" 每一个列，prop为主键，label为文案 \"), _createCommentVNode(\" 索引 \"), _createVNode(_component_el_table_column, {\n      type: \"index\",\n      width: \"50\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"name\",\n      label: \"考试名称\",\n      width: \"200\",\n      \"header-align\": \"left\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"introduction\",\n      label: \"考试介绍\",\n      width: \"200\",\n      \"header-align\": \"left\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"startTime\",\n      label: \"开始时间\",\n      width: \"200\",\n      \"header-align\": \"left\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"endTime\",\n      label: \"结束时间\",\n      width: \"270\",\n      \"header-align\": \"left\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"durationTime\",\n      label: \"限时\",\n      width: \"100\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\",\n      width: \"90\",\n      \"header-align\": \"center\",\n      \"header-cell-style\": {\n        paddingLeft: '0px'\n      }\n    }, {\n      default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"primary\",\n        disabled: _ctx.user.role !== 'STUDENT',\n        onClick: $event => $options.enterExam(scope.$index, scope.row)\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"开始考试\")]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"disabled\", \"onClick\"]), _createCommentVNode(\" <el-button size=\\\"small\\\" type=\\\"primary\\\"  @click=\\\"dialogTableVisible = true; queryPaper(scope.$index, scope.row)\\\">编辑</el-button>\\r\\n                        <el-button size=\\\"small\\\" type=\\\"danger\\\" :disabled=\\\"(user.username !== scope.row.createdBy)&&(user.role!=='ADMIN')\\\" @click=\\\"handlePaperDelete(scope.$index, scope.row)\\\">删除</el-button>\\r\\n                        <el-button size=\\\"small\\\" type=\\\"info\\\" @click=\\\"dialogChartVisible = true; analysis(scope.$index, scope.row); \\\">试卷分析</el-button> \")])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_el_pagination, {\n    \"page-size\": 10,\n    \"pager-count\": 11,\n    layout: \"prev, pager, next\",\n    total: $options.totalPages,\n    onCurrentChange: $options.handlePageChange\n  }, null, 8 /* PROPS */, [\"total\", \"onCurrentChange\"])])]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_el_button_group","default","_withCtx","_Fragment","_renderList","$data","buttons2","button","index","_createBlock","_component_el_button","key","type","isActive","onClick","$event","$options","handleButtonClick","method","_createTextVNode","_toDisplayString","label","_","_component_el_table","data","tableData","_createCommentVNode","_component_el_table_column","width","prop","paddingLeft","scope","_hoisted_6","size","disabled","_ctx","user","role","enterExam","$index","row","_hoisted_7","_component_el_pagination","layout","total","totalPages","onCurrentChange","handlePageChange"],"sources":["C:\\Users\\86139\\Desktop\\demo_vue\\src\\components\\ExamList.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div style=\"margin-top: 10px\">\r\n            <div class=\"form-row\">\r\n                <div class=\"form-group\">\r\n                    <label>考试中心</label>\r\n                </div>\r\n                <div class=\"form-group\" style=\"margin-left:47%\">\r\n                    <el-button-group class=\"ml-4\">\r\n                        <el-button\r\n                        v-for=\"(button, index) in buttons2\"\r\n                        :key=\"index\"\r\n                        :type=\"button.isActive ? 'success' : 'default'\"\r\n                        @click=\"handleButtonClick(button.method, index)\"\r\n                        >\r\n                        {{ button.label }}\r\n                        </el-button>\r\n                    </el-button-group>\r\n                </div>\r\n            </div>\r\n            <el-table :data=\"tableData\" style=\"width: 100%; margin-left: 3%;\">\r\n                <!-- 每一个列，prop为主键，label为文案 -->\r\n                <!-- 索引 -->\r\n                <el-table-column type=\"index\" width=\"50\"></el-table-column>\r\n                <el-table-column prop=\"name\" label=\"考试名称\" width=\"200\" header-align=\"left\"></el-table-column>\r\n                <el-table-column prop=\"introduction\" label=\"考试介绍\" width=\"200\" header-align=\"left\"></el-table-column>\r\n                <el-table-column prop=\"startTime\" label=\"开始时间\" width=\"200\" header-align=\"left\"></el-table-column>\r\n                <el-table-column prop=\"endTime\" label=\"结束时间\" width=\"270\" header-align=\"left\"></el-table-column>\r\n                <el-table-column prop=\"durationTime\" label=\"限时\" width=\"100\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"90\" header-align=\"center\" :header-cell-style=\"{ paddingLeft: '0px' }\">\r\n                    <template #default=\"scope\">\r\n                    <div style=\"display: flex; justify-content: space-between;\">\r\n                        <el-button size=\"small\" type=\"primary\" :disabled=\"user.role!=='STUDENT'\" @click=\"enterExam(scope.$index, scope.row)\">开始考试</el-button>\r\n                        <!-- <el-button size=\"small\" type=\"primary\"  @click=\"dialogTableVisible = true; queryPaper(scope.$index, scope.row)\">编辑</el-button>\r\n                        <el-button size=\"small\" type=\"danger\" :disabled=\"(user.username !== scope.row.createdBy)&&(user.role!=='ADMIN')\" @click=\"handlePaperDelete(scope.$index, scope.row)\">删除</el-button>\r\n                        <el-button size=\"small\" type=\"info\" @click=\"dialogChartVisible = true; analysis(scope.$index, scope.row); \">试卷分析</el-button> -->\r\n                    </div>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </div>\r\n      <div class=\"pagination\">\r\n          <el-pagination\r\n        :page-size=\"10\"\r\n        :pager-count=\"11\"\r\n        layout=\"prev, pager, next\"\r\n        :total=\"totalPages\"\r\n        @current-change=\"handlePageChange\"\r\n      />\r\n      </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport { mapActions, mapState } from 'vuex';\r\nimport { ElMessage } from 'element-plus';\r\nimport * as echarts from 'echarts';\r\nimport { ref } from 'vue';\r\n\r\nexport default {\r\n  name: 'ExamList',\r\n  data() {\r\n    return {\r\n      buttons2: [\r\n        { label: '全部', isActive: true, method: this.getAll}, // 默认第一个按钮为激活状态\r\n        { label: '未开始', isActive: false, method: this.getUnstarted },\r\n        { label: '进行中', isActive: false, method: this.getPro },\r\n        { label: '已完成', isActive: false, method: this.getEnded },\r\n      ],\r\n      currentPage:1,\r\n      dict: {'pageNum':1, 'kind':'all'},\r\n    }\r\n    \r\n  },\r\n  computed: {\r\n      ...mapState(['exams', 'paper', 'paperQuestions', 'user', 'examsPages']),\r\n      totalPages() {\r\n      return this.examsPages ;\r\n    },\r\n    tableData() {\r\n      return this.exams.map(exam => ({\r\n        name: exam.name,\r\n        // introduction: exam.introduction,\r\n        startTime: exam.startTime,\r\n        endTime: exam.endTime,\r\n        durationTime: exam.durationTime,\r\n        paperId: exam.paperId,\r\n        examId: exam.id,\r\n      }));\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions(['fetchStudentExams', 'addPaper', 'fetchExamQuestion', 'addQuestionToPaper', 'removeFromPaper', 'fetchPaperQuestion', 'updatePaperQuestions', 'deletePaper', 'fetchExamPages']),\r\n    getAll(){\r\n      console.log(\"getall\");\r\n      this.dict.kind = 'all';\r\n      this.dict.pageNum = 1;\r\n      this.currentPage = 1;\r\n      this.fetchStudentExams(this.dict);\r\n      this.fetchExamPages(this.dict['kind']);\r\n    },\r\n    getPro(){\r\n      this.dict.kind = 'pro';\r\n      this.dict.pageNum = 1;\r\n      this.currentPage = 1;\r\n      this.fetchStudentExams(this.dict);\r\n      this.fetchExamPages(this.dict['kind']);\r\n    },\r\n    getUnstarted(){\r\n      this.dict.kind = 'unstart';\r\n      this.dict.pageNum = 1;\r\n      this.currentPage = 1;\r\n      this.fetchStudentExams(this.dict);\r\n      this.fetchExamPages(this.dict['kind']);\r\n    },\r\n    getEnded(){\r\n      this.dict.kind = 'end';\r\n      this.dict.pageNum = 1;\r\n      this.currentPage = 1;\r\n      this.fetchStudentExams(this.dict);\r\n      this.fetchExamPages(this.dict['kind']);\r\n    },\r\n    handleButtonClick(method, index) {\r\n      this.activateButton(this.buttons2, index);\r\n      method(); // 调用传递的方法\r\n    },\r\n    activateButton(buttonGroup, index) {\r\n      buttonGroup.forEach((button, i) => {\r\n        button.isActive = i === index;\r\n        //在这里增加发送请求\r\n      });\r\n    },\r\n  handlePageChange(page) {\r\n      console.log('Page changed to:', page); // 日志记录当前页码\r\n      this.currentPage = page;\r\n      this.dict['pageNum'] = this.currentPage;\r\n      this.fetchStudentExams(this.dict); // 触发 Vuex action 以获取新页数据\r\n  },\r\n\r\n    async enterExam(index, row){\r\n      const paperId = row.paperId; // 获取 question id\r\n      console.log(\"row:\",row);\r\n      await this.fetchExamQuestion([paperId, row]);\r\n      this.$router.push('/test2');\r\n    },\r\n  },\r\n  mounted() {\r\n      this.fetchStudentExams(this.dict);\r\n      // this.fetchExams();\r\n      this.fetchExamPages(this.dict.kind);\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.form-group {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0 15px;\r\n}\r\n.container {\r\n  flex: 1;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  overflow: auto;\r\n  display: flex;\r\n  height: 711px;\r\n  flex-direction: column;\r\n}\r\n.form-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 15px;\r\n  margin-left: 1px;\r\n}\r\n\r\n.pagination {\r\n  position: absolute;\r\n  bottom: 40px; /* 距离底部的距离 */\r\n  left: 58%; /* 水平居中 */\r\n  transform: translateX(-50%); /* 水平居中 */\r\n  display: flex;\r\n    justify-content: center;\r\n  align-items: center;\r\n  /* justify-content: space-between; */\r\n  width: 200px; /* 指定pagination的宽度 */\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}